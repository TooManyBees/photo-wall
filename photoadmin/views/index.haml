- content_for(:css) do
  %link{ rel: 'stylesheet', type: 'text/css', href: '/photowall.css' }

%script{ type: 'text/template', id: 'photowall-template-tile' }<
  %figure{ class: "tile {{#if large}}big{{/if}}"}<
    %img{ class: '{{ dim }}', src: '{{ src }}', style: 'left:{{dimX}}px;top:{{dimY}}px'}
    .frame{ class: '{{color}}' }
    %a{ href: '#', data: {url: '{{url}}', caption: '{{caption}}', credit: '{{credit}}'} }
      {{#if caption}}
      %figcaption {{ snippet }}
      {{/if}}
      {{#if credit}}
      %small {{ credit }}
      {{/if}}

%script{ type: 'text/template', id: 'photowall-template-lightbox' }<
  #photowall-lightbox
    #lightbox-film
    #lightbox-image
      {{#if url}}
      %a{ href: "{{url}}" }
        %image{ src: '{{src}}' }
      {{else}}
      %image{ src: '{{src}}' }
      {{/if}}
      %p
        {{caption}}
        %small - {{credit}}

%section{ id: 'photowall-container', class: 'clf' }
  .spinner

%script{ type: 'text/javascript', src: 'http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.js'}
%script{ type: 'text/javascript', src: 'http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js'}
%script{ type: 'text/javascript', src: 'http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js'}
%script{ type: 'text/javascript', src: '/photowall.js'}
:javascript
  $(document).ready(function() {
    LabsPhotoWall.initialize({
      $section: $('#photowall-container'),
      $template: $('#photowall-template-tile'),
      $lightbox: $('#photowall-template-lightbox'),
      json: "#{remote_json}"
    })
  });
