@import gridresets
@import constants

$border-transition: 0.3s ease-in-out

@mixin transform($t, $o)
  transform: $t
  -o-transform: $t
  -ms-transform: $t
  -moz-transform: $t
  -webkit-transform: $t
  transform-origin: $o
  -o-transform-origin: $o
  -ms-transform-origin: $o
  -moz-transform-origin: $o
  -webkit-transform-origin: $o

#lightbox-image
  p
    @include box-sizzle
    background-color: rgba(0,0,0,0.4)
    width: 100%
    font-size: 20px
    color: #eee
    padding: 5px
    position: absolute
    bottom: 0
    text-align: center
  small
    font-size: 80%

#photowall-container
  @include box-sizzle
  width: 900px
  padding: 5px
  margin: 0
  border: 0
  .spinner
    height: 128px
    width: 128px
    background-image: url("/spinner.gif")
    margin: 50px auto
  &.ready
    .spinner
      display: none
  #photowall-lightbox
    position: fixed
    top: 0
    left: 0
    width: 100%
    height: 100%
  #lightbox-film
    background-color: black
    opacity: 0.6
    width: 100%
    height: 100%
  #lightbox-image
    position: fixed
    top: 0
    left: 0
  &:after, .clf:after
    content: ""
    display: table
    clear: both
  .tile
    padding: 0
    margin: 0
    border: 0
    figcaption
      padding: 0
      margin: 0
      border: 0
    img
      padding: 0
      margin: 0
      border: 0
      display: block
  .frame
    @include box-sizzle
    border: 0 solid black
    width: inherit
    height: inherit
    position: absolute
    top: 0
    left: 0
    opacity: 0
    @include transition(opacity $border-transition, border-width $border-transition)
  a
    width: inherit
    height: inherit
    position: absolute
    top: 0
    left: 0

  .c1
    border-color: $color1
  .c2
    border-color: $color2
  .c3
    border-color: $color3
  .c4
    border-color: $color4
  .c5
    border-color: $color5

  .cell
    @include box-sizzle
    float: left
    margin-right: 5px
    margin-bottom: 5px

  .tile
    position: relative
    clear: both
    width: $small-tile-width
    height: $small-tile-width
    margin-bottom: 5px
    overflow: hidden
    &.big
      width: $large-tile-width
      height: $large-tile-width
    &:last-child
      margin: 0
    img
      position: relative
      &.tall
        width: 100%
      &.wide
        height: 100%
    figcaption, small
      @include transition(opacity $border-transition)
    small
      opacity: 0
      font-size: 90%
      position: absolute
      right: 5px
      bottom: 10px
      color: white
      @include transform(rotate(90deg), 100% 0%)
    figcaption
      @include box-sizzle
      padding: 5px $border-width
      opacity: 0
      position: absolute
      bottom: 0
      left: 0
      color: white
      font-size: 14px
      text-align: center
      width: 100%
      background-color: rgba(0,0,0,0.4)
    &:hover
      figcaption, small
        opacity: 1
      .frame
        opacity: 1
        border-width: $border-width
